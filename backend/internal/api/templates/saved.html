{{define "content"}}
<div class="container">
  <div class="hero">
    <h1>Saved Articles</h1>
    <p>Articles you've saved forever</p>
  </div>
  
  {{if .Articles}}
  <div class="articles">
    {{range .Articles}}
    <article class="article-card" data-id="{{.ID}}">
      <h2><a href="/read/{{.ID}}">{{.Title}}</a></h2>
      {{if .Summary}}
      <p class="summary">{{.Summary}}</p>
      {{end}}
      <div class="article-meta">
        <span class="source">{{if .FeedName}}{{.FeedName}}{{else}}Unknown{{end}}</span>
        <span class="reading-time">{{.ReadingTime}} min read</span>
        {{if .QualityRank}}
        <span class="score{{if ge .QualityRank 80}} high{{else if ge .QualityRank 60}} mid{{end}}">{{.QualityRank}}</span>
        {{end}}
      </div>
      <div class="article-actions">
        <button class="action-btn saved" onclick="toggleSave({{.ID}})" title="Remove from saved">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
          </svg>
          Saved
        </button>
      </div>
    </article>
    {{end}}
  </div>
  {{else}}
  <div class="empty-state">
    <p>No saved articles yet. Save articles to keep them forever!</p>
    <a href="/" class="btn btn-primary">Browse Articles</a>
  </div>
  {{end}}
</div>

<script>
function toggleSave(id) {
  fetch('/api/articles/' + id + '/save', { method: 'POST' })
    .then(function(res) { return res.json(); })
    .then(function(data) {
      if (!data.data.saved) {
        var el = document.querySelector('[data-id="' + id + '"]');
        if (el) {
          el.style.opacity = '0.5';
          setTimeout(function() { el.remove(); }, 300);
        }
      }
    });
}
</script>
{{end}}

